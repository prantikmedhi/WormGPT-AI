<DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.3/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        .rating-btn:focus {
            outline: none;
        }
        body {
            background-color: #1e1e2f;
            color: #f5f5f5;
        }
        .bg-white {
            background-color: #2A2A3E ;
        }
        .rating-btn {
            background-color: #4b4b80;
            color: #FFFFFF;
        }
        .rating-btn:focus {
            background-color: #7070b5;
        }
        .rating-btn:hover {
            background-color: #3a3a52;
        }
        input, textarea {
            background-color: #2c2c3e;
            border-color: #8888cc;
            color: #f5f5f5;
        }
        input:focus, textarea:focus {
            border-color: #4b4b80;
            background-color: #3a3a52;
        }
        button {
            background-color: #2C2C3E ;
            color: #FFFFFF;
        }
        button:hover {
            background-color: #7070b5;
        }
        .bg-gray-100 {
            background-color: #1e1e2f;
        }
        .text-gray-700 {
            color: #a3a3c2;
        }
        .text-gray-200 {
            color: #8888cc;
        }
        /* Aesthetic Navigation Menu */
nav {
  position: fixed;
  top: 20px;
  left: 20px;
  background: linear-gradient(135deg, #4b4b80, #7070b5);
  border-radius: 15px;
  box-shadow: 0px 8px 12px rgba(0, 0, 0, 0.4);
  display: flex;
  flex-direction: column;
  align-items: start;
  padding: 15px;
  width: 200px;
  transform: translateY(-50%);
  transition: transform 0.4s ease, opacity 0.4s ease;
  opacity: 0;
  z-index: 200;
}

nav.visible {
  transform: translateY(0%);
  opacity: 1;
}

nav ul {
  list-style: none;
  margin: 0;
  padding: 0;
  width: 100%;
}

nav li {
  margin: 10px 0;
  transition: transform 0.3s, opacity 0.3s;
}

nav li:hover {
  transform: translateX(10px);
  opacity: 0.8;
}

nav li a {
  text-decoration: none;
  color: #ffffff;
  font-size: 18px;
  padding: 10px 15px;
  display: block;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.1);
  transition: background-color 0.3s, box-shadow 0.3s;
}

nav li a:hover {
  background-color: rgba(255, 255, 255, 0.2);
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.3);
}

/* Toggle Button */
.menu-button {
    position: fixed;
    top: 20px; /* Adjust the distance from the top */
    left: 20px; /* Adjust the distance from the left */
    background: linear-gradient(135deg, #7070b5, #4B4B80);
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 300;
    box-shadow: 0px 8px 12px rgba(0, 0, 0, 0.3);
    transition: transform 0.3s, box-shadow 0.3s;
}

.menu-button:hover {
    transform: scale(1.1);
    box-shadow: 0px 12px 20px rgba(0, 0, 0, 0.4);
}

.menu-button::before {
    content: '';
    width: 20px;
    height: 2px;
    background: #ffffff;
    position: relative;
    transition: transform 0.3s;
}

.menu-button::after {
    content: '';
    width: 20px;
    height: 2px;
    background: #ffffff;
    position: relative;
    top: -6px;
    transition: transform 0.3s;
}

.menu-button.open::before {
    transform: rotate(45deg) translate(5px, 5px);
}

.menu-button.open::after {
    transform: rotate(-45deg) translate(5px, -5px);
}

    </style>
    <title>Service Feedback Form</title>
</head>

<body class="min-h-screen py-6 flex flex-col justify-center sm:py-12">
    <div class="relative py-3 sm:max-w-xl sm:mx-auto">
        <div class="header">
        <button class="menu-button" onclick="toggleMenu()">â˜°</button>

        <nav id="menu" class="hidden">
<ul>
<li><a href="homepage.html">Home</a></li>
  <li><a href="image.html">Image Generation</a></li>
  <li><a href="feedback.html">Feedback</a></li>
  <li><a href="contact.html">Contact</a></li>
    <li><a href="about.html">About</a></li> 
</ul>
        </nav>
    </div>

    <!-- Logo and QR code placeholders -->
    <div class="flex justify-between px-4 mb-2">
        <!-- Logo placeholder -->
        
        <!-- QR code placeholder - Only change the data url in the img src to your app url to auto generate qr code -->
        
    </div>

  
    <div class="relative px-4 py-10 bg-white mx-4 md:mx-0 shadow rounded-3xl sm:p-10">
        <div class="max-w-md mx-auto">
            <div class="text-center font-semibold text-xl mb-5">How likely are you to recommend us to a friend or colleague?</div>

            <!-- Rating bubbles 0 to 10 -->
            <div class="grid grid-cols-1 md:grid-cols-1 gap-4 text-center mb-6">
                <div class="flex justify-center">
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="0">0</button>
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="1">1</button>
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="2">2</button>
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="3">3</button>
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="4">4</button>
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="5">5</button>
                </div>
                <div class="flex justify-center">
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="6">6</button>
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="7">7</button>
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="8">8</button>
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="9">9</button>
                    <button class="rating-btn mr-1 w-10 h-10 font-bold rounded-full focus:bg-blue-700" data-rating="10">10</button>
                </div>
            </div>
            
            <div class="text-center mb-8">
                <span class="text-sm">0 - Extremely Unlikely</span>
                <span class="ml-4 text-sm">10 - Extremely Likely</span>
            </div>
            
            <!-- Feedback form -->
            <form id="feedback-form" novalidate="">
                <div class="text-sm font-semibold mb-3">What feature can we add/remove to improve?</div>
                <div>
                    <textarea name="suggestion" class="appearance-none border-2 rounded-xl w-full py-2 px-4 leading-tight focus:outline-none" placeholder="We'd love to hear your suggestions." required=""></textarea>
                </div>

                <div class="mt-4 mb-3 font-semibold text-sm">Email (optional)</div>
                <div class="mb-8">
                    <input type="email" name="email" class="appearance-none border-2 rounded-xl w-full py-2 px-4 leading-tight focus:outline-none" placeholder="Someone@something.com">
                </div>

                <!-- Image upload section -->
                <div class="mb-2 relative">
                    <label for="imgUpload" class="cursor-pointer w-full border-2 border-dashed hover:border-blue-300 p-8 text-center text-gray-700 rounded-xl flex items-center justify-center flex-col">
                        <div id="imgPlaceholder" class="text-sm"><i class="fas fa-image text-3xl mb-2"></i><br>Upload image</div>
                        <img id="imgPreview" src="" alt="Uploaded Image" class="hidden w-full h-auto max-h-48 object-contain border border-gray-200 rounded-xl">
                    </label>
                    <input type="file" name="imgUpload" id="imgUpload" class="hidden" accept="image/*">
                    <button type="button" id="removeImgBtn" class="hidden absolute top-0 right-0 m-2 text-red-500">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="mt-6 mb-4 flex items-center justify-center">
                    <div id="spinner" class="w-6 h-6 border-t-2 border-b-2 border-blue-500 rounded-full hidden animate-spin"></div><br>
                    <button type="submit" class="bg-blue-500 font-bold text-white py-2 px-5 rounded-xl">Send Feedback</button>
                </div>
            </form>
        </div>
    </div>
</div>

    <script>
   const ratingButtons = document.querySelectorAll(".rating-btn");
const feedbackForm = document.getElementById("feedback-form");
const imgUpload = document.getElementById("imgUpload");
const imgPreview = document.getElementById("imgPreview");
const imgPlaceholder = document.getElementById("imgPlaceholder");
const removeImgBtn = document.getElementById("removeImgBtn");
const spinner = document.getElementById("spinner");
let selectedRating = null;

// Handle rating button clicks
ratingButtons.forEach(btn => {
  btn.addEventListener("click", () => {
    selectedRating = btn.getAttribute("data-rating");
    ratingButtons.forEach(b => {
      b.classList.remove("bg-blue-700");
      b.removeAttribute("required");
    });
    btn.classList.add("bg-blue-700");
    btn.setAttribute("required", "");
  });
});

// Preview uploaded image
imgUpload.addEventListener("change", (e) => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = (e) => {
      imgPreview.src = e.target.result;
      imgPreview.classList.remove("hidden");
      imgPlaceholder.classList.add("hidden");
      removeImgBtn.classList.remove("hidden");
    };
    reader.readAsDataURL(file);
  } else {
    imgPreview.classList.add("hidden");
    removeImgBtn.classList.add("hidden");
    imgPlaceholder.classList.remove("hidden");
  }
});

// Remove uploaded image
removeImgBtn.addEventListener("click", () => {
  imgUpload.value = "";
  imgPreview.classList.add("hidden");
  removeImgBtn.classList.add("hidden");
  imgPlaceholder.classList.remove("hidden");
});

// Handle form submission and email the results
feedbackForm.addEventListener("submit", async (e) => {
  e.preventDefault();
  if (selectedRating === null || !feedbackForm.checkValidity()) {
    alert("Please fill out all required fields.");
    return;
  }

  spinner.classList.remove("hidden");

  const formData = new FormData(feedbackForm);
  const suggestion = formData.get("suggestion");
  const email = formData.get("email");
  const attachedImage = formData.get("imgUpload");

  const subject = `Service Feedback: Rating ${selectedRating}`;

  let imgUrl = "";
  if (attachedImage) {
    const dataURL = await toDataURL(attachedImage);
    imgUrl = `<img src="${dataURL}" alt="${attachedImage.name}" />`;
  }

  // Tip: Use an online email body generator to create an email template
  const body = `
                Rating: ${selectedRating}<br>
                Feature to improve: ${suggestion}<br>
                ${email ? `Email: ${email}<br>` : ""}
                ${attachedImage ? `Attached Image: ${imgUrl}` : ""}
            `;

  // Convert uploaded image to base64
  async function toDataURL(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = (event) => {
        resolve(event.target.result);
      };
      reader.onerror = (error) => {
        reject(error);
      };
      reader.readAsDataURL(file);
    });
  }

  // Send the email
  try {
    const response = await fetch("https://backend.buildpicoapps.com/aero/run/self-email-api?pk=v1-Z0FBQUFBQm5WNzJyWnVZdVFsNy1zRnJvc3lxa3Vod2dzSVZnOVV2aUE1QmdyMWhqenI5MlctekdNT3hZbW1Ba0RWRmZXcDNSMWNCS2FzcDFwNFhpa2VndGVQVXFGVGk5SDNhWWxWVnV3LVJMQVJwM1c4a1pTREE9", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        subject,
        body,
        attachedImage: imgUrl ? imgUrl : null
      })
    });

    const result = await response.json();
    spinner.classList.add("hidden");

    if (result.status === "success") {
      alert("Thank you for your feedback!");
    } else {
      console.error("Error sending feedback:", result);
      alert("An error occurred while sending feedback. Please try again later.");
    }
  } catch (error) {
    spinner.classList.add("hidden");
    console.error("Error sending feedback:", error);
    alert("An error occurred while sending feedback. Please try again later.");
  } 
  
});
    </script>
 <script>
  function toggleMenu() {
    const menu = document.getElementById('menu');
    menu.classList.toggle('hidden');
    menu.classList.toggle('visible');
  }
</script> 
</body></html>